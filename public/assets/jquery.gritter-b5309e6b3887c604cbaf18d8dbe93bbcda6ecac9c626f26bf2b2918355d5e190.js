!function(m){m.gritter={},m.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},m.gritter.add=function(t){try{return d.add(t||{})}catch(i){var e="Gritter Error: "+i;"undefined"!=typeof console&&console.error?console.error(e,t):alert(e)}},m.gritter.remove=function(t,e){d.removeSpecific(t,e||{})},m.gritter.removeAll=function(t){d.stop(t||{})};var d={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1"></a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(i){if("string"==typeof i&&(i={text:i}),null===i.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var t=i.title,e=i.text,r=i.image||"",o=i.imageSize||"",s=i.sticky||!1,n=i.class_name||m.gritter.options.class_name,a=i.position,_=i.time||"";this._verifyWrapper(),this._item_count++;var c=this._item_count,p=this._tpl_item;m(["before_open","after_open","before_close","after_close"]).each(function(t,e){d["_"+e+"_"+c]=m.isFunction(i[e])?i[e]:function(){}}),this._custom_timer=0,_&&(this._custom_timer=_);var l=""!=r?'<img src="'+r+'" class="gritter-image" '+(o?'style="height:'+o+'px;"':"")+" />":"",u=""!=r?"gritter-with-image":"gritter-without-image";if(t=t?this._str_replace("[[title]]",t,this._tpl_title):"",p=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[t,e,this._tpl_close,l,this._item_count,u,n],p),!1===this["_before_open_"+c]())return!1;m("#gritter-notice-wrapper").addClass(a).append(p);var f=m("#gritter-item-"+this._item_count);return f.fadeIn(this.fade_in_speed,function(){d["_after_open_"+c](m(this))}),s||this._setFadeTimer(f,c),m(f).bind("mouseenter mouseleave",function(t){"mouseenter"==t.type?s||d._restoreItemIfFading(m(this),c):s||d._setFadeTimer(m(this),c),d._hoverState(m(this),t.type)}),m(f).find(".gritter-close").click(function(){return d.removeSpecific(c,{},null,!0),!1}),c},_countRemoveWrapper:function(t,e,i){e.remove(),this["_after_close_"+t](e,i),0==m(".gritter-item-wrapper").length&&m("#gritter-notice-wrapper").remove()},_fade:function(t,e,i,r){var o="undefined"==typeof(i=i||{}).fade||i.fade,s=i.speed||this.fade_out_speed,n=r;this["_before_close_"+e](t,n),r&&t.unbind("mouseenter mouseleave"),o?t.animate({opacity:0},s,function(){t.animate({height:0},300,function(){d._countRemoveWrapper(e,t,n)})}):this._countRemoveWrapper(e,t)},_hoverState:function(t,e){"mouseenter"==e?(t.addClass("hover"),t.find(".gritter-close").show()):(t.removeClass("hover"),t.find(".gritter-close").hide())},removeSpecific:function(t,e,i,r){if(!i)i=m("#gritter-item-"+t);this._fade(i,t,e||{},r)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]),t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in m.gritter.options)this[opt]=m.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(t,e){var i=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+e]=setTimeout(function(){d._fade(t,e)},i)},stop:function(t){var e=m.isFunction(t.before_close)?t.before_close:function(){},i=m.isFunction(t.after_close)?t.after_close:function(){},r=m("#gritter-notice-wrapper");e(r),r.fadeOut(function(){m(this).remove(),i()}),r.is(":visible")||(e(r),i())},_str_replace:function(t,e,i,r){var o=0,s=0,n="",a="",_=0,c=0,p=[].concat(t),l=[].concat(e),u=i,f=l instanceof Array,m=u instanceof Array;for(u=[].concat(u),r&&(this.window[r]=0),o=0,_=u.length;o<_;o++)if(""!==u[o])for(s=0,c=p.length;s<c;s++)n=u[o]+"",a=f?l[s]!==undefined?l[s]:"":l[0],u[o]=n.split(p[s]).join(a),r&&u[o]!==n&&(this.window[r]+=(n.length-u[o].length)/p[s].length);return m?u:u[0]},_verifyWrapper:function(){0==m("#gritter-notice-wrapper").length&&m("body").append(this._tpl_wrap)}}}(jQuery);
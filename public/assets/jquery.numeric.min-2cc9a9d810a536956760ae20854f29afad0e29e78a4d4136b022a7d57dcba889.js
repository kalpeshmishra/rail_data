!function(y){y.fn.numeric=function(e,t){"boolean"==typeof e&&(e={decimal:e,negative:!0,decimalPlaces:-1}),"undefined"==typeof(e=e||{}).negative&&(e.negative=!0);var n=!1===e.decimal?"":e.decimal||".",r=!0===e.negative,i="undefined"==typeof e.decimalPlaces?-1:e.decimalPlaces;return t="function"==typeof t?t:function(){},this.data("numeric.decimal",n).data("numeric.negative",r).data("numeric.callback",t).data("numeric.decimalPlaces",i).keypress(y.fn.numeric.keypress).keyup(y.fn.numeric.keyup).blur(y.fn.numeric.blur)},y.fn.numeric.keypress=function(e){var t=y.data(this,"numeric.decimal"),n=y.data(this,"numeric.negative"),r=y.data(this,"numeric.decimalPlaces"),i=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(13==i&&"input"==this.nodeName.toLowerCase())return!0;if(13==i)return!1;var a=!1;if(e.ctrlKey&&97==i||e.ctrlKey&&65==i)return!0;if(e.ctrlKey&&120==i||e.ctrlKey&&88==i)return!0;if(e.ctrlKey&&99==i||e.ctrlKey&&67==i)return!0;if(e.ctrlKey&&122==i||e.ctrlKey&&90==i)return!0;if(e.ctrlKey&&118==i||e.ctrlKey&&86==i||e.shiftKey&&45==i)return!0;if(i<48||57<i){var c=y(this).val();if(0!==y.inArray("-",c.split(""))&&n&&45==i&&(0===c.length||0===parseInt(y.fn.getSelectionStart(this),10)))return!0;t&&i==t.charCodeAt(0)&&-1!=y.inArray(t,c.split(""))&&(a=!1),8!=i&&9!=i&&13!=i&&35!=i&&36!=i&&37!=i&&39!=i&&46!=i?a=!1:"undefined"!=typeof e.charCode&&(e.keyCode==e.which&&0!==e.which?(a=!0,46==e.which&&(a=!1)):0!==e.keyCode&&0===e.charCode&&0===e.which&&(a=!0)),t&&i==t.charCodeAt(0)&&(a=-1==y.inArray(t,c.split("")))}else if(a=!0,t&&0<r){var u=y.inArray(t,y(this).val().split(""));0<=u&&y(this).val().length>u+r&&(a=!1)}return a},y.fn.numeric.keyup=function(){var e=y(this).val();if(e&&0<e.length){var t=y.fn.getSelectionStart(this),n=y.fn.getSelectionEnd(this),r=y.data(this,"numeric.decimal"),i=y.data(this,"numeric.negative"),a=y.data(this,"numeric.decimalPlaces");if(""!==r&&null!==r)0===(o=y.inArray(r,e.split("")))&&(this.value="0"+e,t++,n++),1==o&&"-"==e.charAt(0)&&(this.value="-0"+e.substring(1),t++,n++),e=this.value;for(var c=[0,1,2,3,4,5,6,7,8,9,"-",r],u=e.length,l=u-1;0<=l;l--){var s=e.charAt(l);0!==l&&"-"==s?e=e.substring(0,l)+e.substring(l+1):0!==l||i||"-"!=s||(e=e.substring(1));for(var d=!1,f=0;f<c.length;f++)if(s==c[f]){d=!0;break}d&&" "!=s||(e=e.substring(0,l)+e.substring(l+1))}var o,h=y.inArray(r,e.split(""));if(0<h)for(var m=u-1;h<m;m--){e.charAt(m)==r&&(e=e.substring(0,m)+e.substring(m+1))}if(r&&0<a)0<=(o=y.inArray(r,e.split("")))&&(e=e.substring(0,o+a+1),n=Math.min(e.length,n));this.value=e,y.fn.setSelection(this,[t,n])}},y.fn.numeric.blur=function(){var e=y.data(this,"numeric.decimal"),t=y.data(this,"numeric.callback"),n=y.data(this,"numeric.negative"),r=this.value;""!==r&&(new RegExp(n?"-?":"^\\d+$|^\\d*"+e+"\\d+$").exec(r)||t.apply(this))},y.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",y.fn.numeric.keypress).unbind("keyup",y.fn.numeric.keyup).unbind("blur",y.fn.numeric.blur)},y.fn.getSelectionStart=function(e){if("number"===e.type)return undefined;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:Math.max(0,e.value.lastIndexOf(t.text))}try{return e.selectionStart}catch(n){return 0}},y.fn.getSelectionEnd=function(e){if("number"===e.type)return undefined;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},y.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if("number"===e.type)e.focus();else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t[0]),n.moveEnd("character",t[1]-t[0]),n.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(r){}}}}(jQuery);